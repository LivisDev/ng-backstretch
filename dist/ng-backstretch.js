angular.module("ng-backstretch",[]).directive("backstretch",["$window","$log",function(a){return{restrict:"A",scope:{},link:function(b,c,d){var e={wrapper:{left:0,top:0,overflow:"hidden",margin:0,padding:0,height:"100%",width:"100%",zIndex:-999998,position:"absolute"},image:{position:"absolute",display:"none",margin:0,padding:0,border:"none",width:"auto",height:"auto",maxHeight:"none",maxWidth:"none",zIndex:-999999}};b.wrapper=angular.element('<div class="backstretch"></div>'),b.wrapper.css(e.wrapper),b.image=angular.element("<img>"),b.image[0].src=d.backgroundUrl,b.image.css(e.image),b.wrapper.append(b.image),c.append(b.wrapper),b.load=function(){b.ratio=this.width/this.height,b.image.css({display:"block"}),b.resize()},b.resize=function(){var a,d={left:0,top:0,width:"auto",height:"auto"},e=c[0].offsetWidth(),f=e,g=c[0].offsetHeight(),h=f/b.ratio;h>=g?(a=(h-g)/2,d.top="-"+a+"px"):(h=g,f=h*b.ratio,a=(f-e)/2,d.left="-"+a+"px"),d.width=f,d.height=h,b.wrapper.css({width:e,height:g}),b.image.css(d)},b.image.bind("load",b.load),angular.element(a).bind("resize",b.resize)}}}]);