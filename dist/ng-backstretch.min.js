/*!
 * ng-backstretch
 * https://github.com/rprovost/ng-backstretch
 *
 * Copyright (c) 2014-2015 Ryan Provost
 * Licensed under the MIT license.
 */
angular.module("ng-backstretch",[]).directive("backstretch",["$window","$timeout",function(a,b){return{restrict:"A",scope:{images:"&backstretchImages",duration:"&backstretchDuration",fade:"&backstretchFade"},link:function(c,d,e){if(c.images=Array.isArray(c.images())?c.images():[c.images()],c.duration=c.duration()||5e3,c.fade=c.fade()||0,0===c.images.length)return!1;var f={wrapper:{left:0,top:0,overflow:"hidden",margin:0,padding:0,height:"100%",width:"100%",zIndex:-999998,position:"absolute"},image:{position:"absolute",opacity:0,margin:0,padding:0,border:"none",width:"auto",height:"auto",maxHeight:"none",maxWidth:"none",zIndex:-999999,transition:"all "+c.fade+"s"}};c.wrapper=angular.element('<div class="backstretch"></div>'),c.wrapper.css(f.wrapper),c.images.forEach(function(a,b,d){c.image=angular.element("<img>"),c.image[0].src=a,c.image.css(f.image),c.wrapper.append(c.image)}),d.append(c.wrapper),c.index=0,c.load=function(a){c.ratio=this.width/this.height,c.resize(),c.show(c.index++)},c.resize=function(a){var b,e={left:0,top:0,width:"auto",height:"auto"},f=d[0].offsetWidth,g=f,h=d[0].offsetHeight>0?d[0].offsetHeight:angular.isObject(d[0].offsetParent)?d[0].offsetParent.offsetHeight:0,i=g/c.ratio;i>=h?(b=(i-h)/2,e.top="-"+b+"px"):(i=h,g=i*c.ratio,b=(g-f)/2,e.left="-"+b+"px"),e.width=g+"px",e.height=i+"px",c.wrapper.css({width:f,height:h});for(var j=0;j<c.wrapper.children().length;j++){angular.element(c.wrapper.children()[j]).css(e)}},c.show=function(a){var d=c.wrapper.children()[a];if(c.image=angular.element(d),1===c.images.length)return void c.image.css({opacity:1});a>=c.images.length-1&&(c.index=0),c.image.css({opacity:1}),b(function(){c.image.css({opacity:0})},c.duration),b(function(){c.show(c.index++)},c.duration)},c.image.bind("load",c.load),angular.element(a).bind("resize",c.resize),angular.element(a).bind("orientationchange",c.resize),c.$on("$destroy",function(){angular.element(a).unbind("resize",c.resize),angular.element(a).unbind("orientationchange",c.resize)})}}}]);
//# sourceMappingURL=ng-backstretch.min.js.map